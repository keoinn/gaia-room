import{r as l,G as x,o as k,e as w,h as j,j as n,k as d,N as F,O as U,A as b,u as V,t as L}from"./index-c_I6KHwn.js";import{E as P,c as $,a as C,S as J,P as H,C as I,f as W,p as X,h as q}from"./event-BwvRvLHA.js";import{V as u}from"./VBtn-DG_p0Spe.js";import{_ as G}from"./plugin-vueexport-helper-DlAUqK2U.js";import"./requests-BZVoSnTE.js";const T=(c,e,a)=>{e.aspect=c.clientWidth/c.clientHeight,e.updateProjectionMatrix(),a.setSize(c.clientWidth,c.clientHeight),a.setPixelRatio(window.devicePixelRatio)};class Q{constructor(e,a,t){T(e,a,t),window.addEventListener("resize",()=>{T(e,a,t),this.onResize()})}onResize(){}}const _=[];class Y extends P{constructor(e){super(e);const a=$(),t=C("sun"),i=C("ambient");[t,i,a].forEach(p=>{this.scene.add(p)}),this.generateObjects([J]),this.generateObjects(H),new Q(e,this.camera,this.renderer)}generateObjects(e){return e.forEach(a=>{const t=new I(this.scene,this.camera,a,this.labelRenderer);console.log("Created",t.name),this.scene.add(t.container),a.name.toUpperCase()!=="SUN"&&this.loop.updatables.push(t.container),_.push(t)})}clearTrace(){_.forEach(e=>{e.name.toUpperCase()!=="SUN"&&(e.trace=[])})}set OrbitingRecordTrace(e){const a=e===!0;_.forEach(t=>{t.isTraced=a,a||(t.trace=[])})}}const K="/gaia-room/assets/backgroundmusic-DFsQyoa2.wav",Z={id:"timeControl"},ee={class:"speedControl"},te=["disabled"],se={id:"speedValue"},ae={class:"info-text"},oe={class:"info-text"},le=["src"],ne=10,ce="2024-01-01",ie="2025-01-01",re="0.05",de={__name:"SmorreryScence",setup(c){let e;const a=l(),t=l(!1),i=l(!1),p=l(!0),r=l(!1),f=l(1),g=l(946728e6);let S,y;const h=l(!1),m=l(!0),A=()=>{t.value=!t.value,t.value?(e.start(),h.value.play()):e.stop()},E=()=>{i.value=!i.value,i.value?e.loop.played=1:e.loop.played=0},z=()=>{p.value=!p.value,p.value?e.loop.timeDirect=1:e.loop.timeDirect=0,e.clearTrace()},R=()=>{r.value=!r.value,e.OrbitingRecordTrace=r.value,console.log(`Trace status = ${r.value}`)},D=s=>{e.loop.shiftDate=s,r.value=!1,e.OrbitingRecordTrace=r.value,e.clearTrace()};x(f,s=>{e.loop.timeScaleRate=s});const M=s=>parseFloat(s),O=s=>{const o=new Date(s);return o.getFullYear()+"-"+("0"+(o.getMonth()+1)).slice(-2)+"-"+("0"+o.getDate()).slice(-2)},N=s=>(s/864e5+24405875e-1).toFixed(2),B=()=>{m.value=!m.value,h.value.muted=m.value};return k(()=>{const s=document.querySelector("#target");e=new Y(s)}),k(async()=>{try{const s=await W(ne);console.log("Fetched data:",s.data.data.length,"NEOs."),S=s.data;let o=X(S);console.log(o),e.generateObjects(o);const v=await q(ce,ie,re);console.log("Fetched data:",v.data.data.length,"close-approach events."),y=v.data}catch(s){console.error("Error fetching data:",s)}x(e.loop.currentDate_ref,s=>{g.value=s}),h.value.muted=m.value}),(s,o)=>(w(),j("div",{id:"target",ref_key:"target",ref:a},[o[4]||(o[4]=n("div",{id:"info"},null,-1)),n("div",Z,[d(u,{class:"video-btn text-none",onClick:A,text:t.value===!0?"Stop":"Run",size:"small"},null,8,["text"]),d(u,{class:"video-btn",disabled:!t.value,icon:i.value===!0?"mdi-pause":"mdi-play",onClick:E,size:"small"},null,8,["disabled","icon"]),d(u,{class:"video-btn",disabled:!t.value,icon:p.value===!0?"mdi-skip-backward":"mdi-skip-forward",onClick:z,size:"small"},null,8,["disabled","icon"]),d(u,{class:"video-btn text-none",disabled:!t.value||!i.value,"prepend-icon":r.value===!0?"mdi-stop-circle":"mdi-record",onClick:R,text:"Trace",size:"small"},null,8,["disabled","prepend-icon"]),d(u,{class:"video-btn text-none",disabled:!t.value,text:"J2000",size:"small",onClick:o[0]||(o[0]=v=>D(946728e6))},null,8,["disabled"]),d(u,{class:"video-btn text-none",disabled:!t.value,text:"Today",size:"small",onClick:o[1]||(o[1]=v=>D(new Date().getTime()))},null,8,["disabled"]),n("div",ee,[o[3]||(o[3]=n("label",{for:"speedSlider"},"Speed:",-1)),F(n("input",{"onUpdate:modelValue":o[2]||(o[2]=v=>f.value=v),type:"range",id:"speedSlider",min:"0.1",max:"10",step:"0.01",disabled:!t.value},null,8,te),[[U,f.value]]),n("span",se,b(M(f.value))+"x",1)]),n("span",ae,b(O(g.value)),1),n("span",oe," JD "+b(N(g.value)),1),d(u,{class:"video-btn",icon:m.value?"mdi-volume-off":"mdi-volume-high",onClick:B,size:"small"},null,8,["icon"]),n("audio",{ref_key:"backgroundMusic",ref:h,src:V(K),autoplay:"",loop:"",style:{display:"none"}},null,8,le)])],512))}},ue={};function pe(c,e){const a=de;return w(),L(a)}const be=G(ue,[["render",pe]]);export{be as default};
